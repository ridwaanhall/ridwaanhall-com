<div id="mobile-sidebar" class="fixed inset-0 z-40 bg-transparent bg-opacity-60 backdrop-blur-sm hidden md:hidden" aria-hidden="true">
    <div class="fixed inset-y-0 left-0 w-72 bg-black transition-all duration-300 transform -translate-x-full shadow-xl flex flex-col" id="mobile-menu">
        <div class="flex items-center justify-between p-5 mb-4">
            <div class="flex items-center">
                <div class="relative">
                    <img src="{{ about.image_url }}" alt="{{ about.name }} Profile Photo" class="w-12 h-12 rounded-full object-cover" width="358" height="358">
                    {% if about.is_active %}
                    <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full"></div>
                    {% endif %}
                </div>
                <div class="ml-3">
                    <span class="text-xl font-semibold">{{ about.name }}</span>
                    <p class="text-xs text-zinc-400 hover:text-zinc-300">@{{ about.username }}</p>
                </div>
            </div>
            <button id="close-sidebar" class="transition-colors p-2 rounded-full" tabindex="-1">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        
        <!-- Search Section for Mobile -->
        <div class="px-3 mb-3">
            <div class="flex items-center px-3 py-2 mb-1 rounded-lg border border-zinc-700" id="mobile-search-trigger" tabindex="-1">
                <svg class="w-5 h-5 text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <span class="ml-2.5">Search</span>
                <span class="ml-auto">
                    <div class="flex items-center gap-0.5 rounded bg-zinc-800 px-1 py-0.5 text-xs text-zinc-400">
                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="mt-0.5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 14c-2.206 0-4 1.794-4 4s1.794 4 4 4a4.003 4.003 0 0 0 3.998-3.98H10V16h4v2.039h.004A4.002 4.002 0 0 0 18 22c2.206 0 4-1.794 4-4s-1.794-4-4-4h-2v-4h2c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4v2h-4V5.98h-.002A4.003 4.003 0 0 0 6 2C3.794 2 2 3.794 2 6s1.794 4 4 4h2v4H6zm2 4c0 1.122-.879 2-2 2s-2-.878-2-2 .879-2 2-2h2v2zm10-2c1.121 0 2 .878 2 2s-.879 2-2 2-2-.878-2-2v-2h2zM16 6c0-1.122.879-2 2-2s2 .878 2 2-.879 2-2 2h-2V6zM6 8c-1.121 0-2-.878-2-2s.879-2 2-2 2 .878 2 2v2H6zm4 2h4v4h-4v-4z"></path>
                        </svg>
                        <span>k</span>
                    </div>
                </span>
            </div>
        </div>

        <!-- Theme Switcher for Mobile -->
        <div class="px-3 mb-3">
            <div class="relative">
                <button id="mobile-theme-button" class="flex items-center w-full px-3 py-2 rounded-lg border border-zinc-700 hover:bg-zinc-800 transition-colors" tabindex="-1">
                    <svg id="mobile-theme-icon" class="w-5 h-5 text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <span id="mobile-theme-text" class="ml-2.5">Theme</span>
                    <svg class="w-4 h-4 ml-auto text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6,9 12,15 18,9"></polyline>
                    </svg>
                </button>
                <div id="mobile-theme-dropdown" class="absolute top-full left-0 right-0 mt-1 bg-black border border-zinc-700 rounded-lg shadow-lg z-50 hidden">
                    <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center rounded-t-lg" data-theme="light">
                        <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <span class="text-sm">Light</span>
                    </button>
                    <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center" data-theme="dark">
                        <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <span class="text-sm">Dark</span>
                    </button>
                    <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center rounded-b-lg" data-theme="system">
                        <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                        <span class="text-sm">System</span>
                    </button>
                </div>
            </div>
        </div>
        
        <nav class="px-3 flex-grow">
            <a {% if request.resolver_match.url_name != 'home' %}href="{% url 'home' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'home' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name == 'home' %}text-white animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path>
                    <polyline points="8 10 12 14 16 10"></polyline>
                </svg>
                <span class="ml-2.5">Home</span>

                {% if request.resolver_match.url_name == 'home' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            <a {% if request.resolver_match.url_name != 'dashboard' %}href="{% url 'dashboard' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'dashboard' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name == 'dashboard' %}animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                    <rect x="9" y="9" width="6" height="6"></rect>
                    <line x1="9" y1="1" x2="9" y2="4"></line>
                    <line x1="15" y1="1" x2="15" y2="4"></line>
                    <line x1="9" y1="20" x2="9" y2="23"></line>
                    <line x1="15" y1="20" x2="15" y2="23"></line>
                    <line x1="20" y1="9" x2="23" y2="9"></line>
                    <line x1="20" y1="14" x2="23" y2="14"></line>
                    <line x1="1" y1="9" x2="4" y2="9"></line>
                    <line x1="1" y1="14" x2="4" y2="14"></line>
                </svg>
                <span class="ml-2.5">Dashboard</span>

                {% if request.resolver_match.url_name == 'dashboard' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            <a {% if request.resolver_match.url_name != 'projects' %}href="{% url 'projects' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name in 'projects projects_detail' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name in 'projects projects_detail' %}text-white animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                    <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                    <line x1="6" y1="1" x2="6" y2="4"></line>
                    <line x1="10" y1="1" x2="10" y2="4"></line>
                    <line x1="14" y1="1" x2="14" y2="4"></line>
                </svg>
                <span class="ml-2.5">Projects</span>
                
                {% if request.resolver_match.url_name in 'projects projects_detail' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            <a {% if request.resolver_match.url_name != 'blog' %}href="{% url 'blog' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name in 'blog blog_detail' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name in 'blog blog_detail' %}text-white animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 11a9 9 0 0 1 9 9"></path>
                    <path d="M4 4a16 16 0 0 1 16 16"></path>
                    <circle cx="5" cy="19" r="1"></circle>
                </svg>
                <span class="ml-2.5">Blog</span>
                
                {% if request.resolver_match.url_name in 'blog blog_detail' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            <a {% if request.resolver_match.url_name != 'about' %}href="{% url 'about' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'about' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name == 'about' %}animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span class="ml-2.5">About</span>

                {% if request.resolver_match.url_name == 'about' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            <a {% if request.resolver_match.url_name != 'contact' %}href="{% url 'contact' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'contact' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">
                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name == 'contact' %}text-white animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.92 2.38A15.72 15.72 0 0 0 17.5 2a8.26 8.26 0 0 0-6 2.06Q9.89 5.67 8.31 7.27c-1.21-.13-4.08-.2-6 1.74a1 1 0 0 0 0 1.41l11.3 11.32a1 1 0 0 0 1.41 0c1.95-2 1.89-4.82 1.77-6l3.21-3.2c3.19-3.19 1.74-9.18 1.68-9.43a1 1 0 0 0-.76-.73zm-2.36 8.75L15 14.67a1 1 0 0 0-.27.9 6.81 6.81 0 0 1-.54 3.94L4.52 9.82a6.67 6.67 0 0 1 4-.5A1 1 0 0 0 9.39 9s1.4-1.45 3.51-3.56A6.61 6.61 0 0 1 17.5 4a14.51 14.51 0 0 1 2.33.2c.24 1.43.62 5.04-1.27 6.93z"></path>
                    <circle cx="15.73" cy="8.3" r="2"></circle>
                    <path d="M5 16c-2 1-2 5-2 5a7.81 7.81 0 0 0 5-2z"></path>
                </svg>
                <span class="ml-2.5">Contact</span>

                {% if request.resolver_match.url_name == 'contact' %}                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            {% if GUESTBOOK_PAGE %}
            <a {% if request.resolver_match.url_name != 'guestbook' %}href="{% url 'guestbook' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'guestbook' %}bg-zinc-800{% else %} hover:bg-zinc-800{% endif %}" tabindex="-1">                <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 {% if request.resolver_match.url_name == 'guestbook' %}text-white animate-pulse{% else %}text-zinc-400{% endif %}" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 256 256" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M120,128a16,16,0,1,1-16-16A16,16,0,0,1,120,128Zm32-16a16,16,0,1,0,16,16A16,16,0,0,0,152,112Zm84,16A108,108,0,0,1,78.77,224.15L46.34,235A20,20,0,0,1,21,209.66l10.81-32.43A108,108,0,1,1,236,128Zm-24,0A84,84,0,1,0,55.27,170.06a12,12,0,0,1,1,9.81l-9.93,29.79,29.79-9.93a12.1,12.1,0,0,1,3.8-.62,12,12,0,0,1,6,1.62A84,84,0,0,0,212,128Z"></path>
                </svg>
                <span class="ml-2.5">Guestbook</span>
                {% if request.resolver_match.url_name == 'guestbook' %}
                <span class="ml-auto">
                    <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                    </svg>
                </span>
                {% endif %}
            </a>
            {% endif %}
        </nav>

        <div class="px-6 py-4 mt-auto text-center text-xs text-zinc-400">
            © {% now "Y" %} {{ about.name }} <span class="mx-1">•</span> <a href="{% url 'privacy' %}" class="hover: hover:underline {% if request.resolver_match.url_name == 'privacy' %} underline{% endif %}">Privacy</a>
        </div>
    </div>
</div>

<div class="hidden z-40 md:flex md:flex-col md:w-62 md:fixed md:inset-y-0 bg-black shadow-xl">
    <div class="fixed mb-5 z-20 w-full px-3 py-2 mt-8 mb-0 shadow-sm relative border-none bg-transparent">
        <div class="flex items-start justify-between lg:flex-col lg:space-y-4">
            <div class="flex w-full flex-grow items-center gap-4 lg:flex-col lg:items-start lg:gap-0.5 lg:px-1">
                <div class="relative rounded-full">
                    <img src="{{ about.image_url }}" alt="{{ about.name }} Profile Photo" 
                         class="w-15 h-15 rounded-full object-cover duration-700 ease-in-out scale-100 lg:hover:scale-105" 
                         loading="lazy" decoding="async" width="358" height="358">
                    {% if about.is_active %}
                    <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border border-zinc-950"></div>
                    {% endif %}
                </div>
                <div class="mt-1 flex items-center gap-2 lg:mt-4">
                    <h2 class="text-lg font-medium lg:text-xl">{{ about.name }}</h2>
                    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="text-blue-400" height="18" width="18" xmlns="http://www.w3.org/2000/svg">
                        <path fill="none" d="M0 0h24v24H0z"></path>
                        <path d="M23 12l-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72l-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"></path>
                    </svg>
                </div>
                <div class="hidden text-[15px] text-zinc-400 hover:text-zinc-300 transition-all duration-300 hover: lg:flex">@{{ about.username }}</div>
            </div>
        </div>
    </div>      <!-- Search Section for Desktop -->
    <div class="px-3 mb-3">
        <div class="flex items-center px-3 py-2 mb-1 rounded-lg border border-zinc-700" id="desktop-search-trigger">
            <svg class="w-5 h-5 text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <span class="ml-2.5">Search</span>
            <span class="ml-auto">
                <div class="flex items-center gap-0.5 rounded bg-zinc-800 px-1 py-0.5 text-xs text-zinc-400">
                    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="mt-0.5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 14c-2.206 0-4 1.794-4 4s1.794 4 4 4a4.003 4.003 0 0 0 3.998-3.98H10V16h4v2.039h.004A4.002 4.002 0 0 0 18 22c2.206 0 4-1.794 4-4s-1.794-4-4-4h-2v-4h2c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4v2h-4V5.98h-.002A4.003 4.003 0 0 0 6 2C3.794 2 2 3.794 2 6s1.794 4 4 4h2v4H6zm2 4c0 1.122-.879 2-2 2s-2-.878-2-2 .879-2 2-2h2v2zm10-2c1.121 0 2 .878 2 2s-.879 2-2 2-2-.878-2-2v-2h2zM16 6c0-1.122.879-2 2-2s2 .878 2 2-.879 2-2 2h-2V6zM6 8c-1.121 0-2-.878-2-2s.879-2 2-2 2 .878 2 2v2H6zm4 2h4v4h-4v-4z"></path>
                    </svg>
                    <span>k</span>
                </div>
            </span>
        </div>
    </div>

    <!-- Theme Switcher for Desktop -->
    <div class="px-3 mb-3">
        <div class="relative">
            <button id="desktop-theme-button" class="flex items-center w-full px-3 py-2 rounded-lg border border-zinc-700 hover:bg-zinc-800 transition-colors">
                <svg id="desktop-theme-icon" class="w-5 h-5 text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <span id="desktop-theme-text" class="ml-2.5">Theme</span>
                <svg class="w-4 h-4 ml-auto text-zinc-400" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6,9 12,15 18,9"></polyline>
                </svg>
            </button>
            <div id="desktop-theme-dropdown" class="absolute top-full left-0 right-0 mt-1 bg-black border border-zinc-700 rounded-lg shadow-lg z-50 hidden">
                <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center rounded-t-lg" data-theme="light">
                    <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <span class="text-sm">Light</span>
                </button>
                <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center" data-theme="dark">
                    <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <span class="text-sm">Dark</span>
                </button>
                <button class="theme-option w-full px-3 py-2 text-left hover:bg-zinc-800 flex items-center rounded-b-lg" data-theme="system">
                    <svg class="w-4 h-4 text-zinc-400 mr-3" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                    <span class="text-sm">System</span>
                </button>
            </div>
        </div>
    </div>
    
    <nav class="px-3 flex-grow">
        <a {% if request.resolver_match.url_name != 'home' %}href="{% url 'home' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'home' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name == 'home' %} animate-pulse {% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path>
                <polyline points="8 10 12 14 16 10"></polyline>
            </svg>
    
            <span class="ml-2.5">Home</span>
    
            {% if request.resolver_match.url_name == 'home' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>

        <a {% if request.resolver_match.url_name != 'dashboard' %}href="{% url 'dashboard' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'dashboard' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name == 'dashboard' %} animate-pulse {% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                <rect x="9" y="9" width="6" height="6"></rect>
                <line x1="9" y1="1" x2="9" y2="4"></line>
                <line x1="15" y1="1" x2="15" y2="4"></line>
                <line x1="9" y1="20" x2="9" y2="23"></line>
                <line x1="15" y1="20" x2="15" y2="23"></line>
                <line x1="20" y1="9" x2="23" y2="9"></line>
                <line x1="20" y1="14" x2="23" y2="14"></line>
                <line x1="1" y1="9" x2="4" y2="9"></line>
                <line x1="1" y1="14" x2="4" y2="14"></line>
            </svg>
    
            <span class="ml-2.5">Dashboard</span>
    
            {% if request.resolver_match.url_name == 'dashboard' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>
        <a {% if request.resolver_match.url_name != 'projects' %}href="{% url 'projects' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name in 'projects projects_detail' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name in 'projects projects_detail' %} animate-pulse {% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                <line x1="6" y1="1" x2="6" y2="4"></line>
                <line x1="10" y1="1" x2="10" y2="4"></line>
                <line x1="14" y1="1" x2="14" y2="4"></line>
            </svg>
    
            <span class="ml-2.5">Projects</span>
    
            {% if request.resolver_match.url_name in 'projects projects_detail' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>
        <a {% if request.resolver_match.url_name != 'blog' %}href="{% url 'blog' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name in 'blog blog_detail' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name in 'blog blog_detail' %} animate-pulse {% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 11a9 9 0 0 1 9 9"></path>
                <path d="M4 4a16 16 0 0 1 16 16"></path>
                <circle cx="5" cy="19" r="1"></circle>
            </svg>
    
            <span class="ml-2.5">Blog</span>
    
            {% if request.resolver_match.url_name in 'blog blog_detail' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>

        <a {% if request.resolver_match.url_name != 'about' %}href="{% url 'about' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'about' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name == 'about' %} animate-pulse {% endif %}" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            
            <span class="ml-2.5">About</span>
            
            {% if request.resolver_match.url_name == 'about' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>
        <a {% if request.resolver_match.url_name != 'contact' %}href="{% url 'contact' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'contact' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">
            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name == 'contact' %} animate-pulse {% endif %}" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.92 2.38A15.72 15.72 0 0 0 17.5 2a8.26 8.26 0 0 0-6 2.06Q9.89 5.67 8.31 7.27c-1.21-.13-4.08-.2-6 1.74a1 1 0 0 0 0 1.41l11.3 11.32a1 1 0 0 0 1.41 0c1.95-2 1.89-4.82 1.77-6l3.21-3.2c3.19-3.19 1.74-9.18 1.68-9.43a1 1 0 0 0-.76-.73zm-2.36 8.75L15 14.67a1 1 0 0 0-.27.9 6.81 6.81 0 0 1-.54 3.94L4.52 9.82a6.67 6.67 0 0 1 4-.5A1 1 0 0 0 9.39 9s1.4-1.45 3.51-3.56A6.61 6.61 0 0 1 17.5 4a14.51 14.51 0 0 1 2.33.2c.24 1.43.62 5.04-1.27 6.93z"></path>
                <circle cx="15.73" cy="8.3" r="2"></circle>
                <path d="M5 16c-2 1-2 5-2 5a7.81 7.81 0 0 0 5-2z"></path>
            </svg>
    
            <span class="ml-2.5">Contact</span>
    
            {% if request.resolver_match.url_name == 'contact' %}            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>
        {% if GUESTBOOK_PAGE %}
        <a {% if request.resolver_match.url_name != 'guestbook' %}href="{% url 'guestbook' %}"{% else %}role="button"{% endif %} class="flex group items-center px-3 py-2 mb-1 rounded-lg {% if request.resolver_match.url_name == 'guestbook' %} bg-zinc-800 {% else %} hover:bg-zinc-800 {% endif %}">            <svg class="w-5 h-5 transition-transform duration-300 ease-in-out group-hover:-rotate-12 text-zinc-400 {% if request.resolver_match.url_name == 'guestbook' %} animate-pulse {% endif %}" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 256 256" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                <path d="M120,128a16,16,0,1,1-16-16A16,16,0,0,1,120,128Zm32-16a16,16,0,1,0,16,16A16,16,0,0,0,152,112Zm84,16A108,108,0,0,1,78.77,224.15L46.34,235A20,20,0,0,1,21,209.66l10.81-32.43A108,108,0,1,1,236,128Zm-24,0A84,84,0,1,0,55.27,170.06a12,12,0,0,1,1,9.81l-9.93,29.79,29.79-9.93a12.1,12.1,0,0,1,3.8-.62,12,12,0,0,1,6,1.62A84,84,0,0,0,212,128Z"></path>
            </svg>
            <span class="ml-2.5">Guestbook</span>
            {% if request.resolver_match.url_name == 'guestbook' %}
            <span class="ml-auto">
                <svg class="animate-pulse" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path>
                </svg>
            </span>
            {% endif %}
        </a>
        {% endif %}
    </nav>

    <div class="px-6 py-4 mt-auto text-center text-xs text-zinc-400">
        © {% now "Y" %} {{ about.name }} <span class="mx-1">•</span> <a href="{% url 'privacy' %}" class="hover: hover:underline {% if request.resolver_match.url_name == 'privacy' %} underline{% endif %}">Privacy</a>
    </div>
</div>

<!-- Search Modal -->
<div id="search-modal" class="fixed inset-0 z-50 backdrop-blur-none hidden transition-all duration-300 ease-out" aria-hidden="true">
    <div id="search-modal-backdrop" class="flex min-h-full items-center justify-center p-4">
        <div id="search-modal-content" class="relative mx-auto max-w-xl w-full overflow-hidden rounded-xl border-2 border-zinc-800 bg-black ring-1 ring-black/5 shadow-3xl transform scale-95 opacity-0 transition-all duration-300 ease-out">
            <div class="flex items-center gap-3 border-b border-zinc-800 px-4">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="22" width="22" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"></path>
                </svg>
                <input class="h-14 w-full border-0 bg-transparent text-white placeholder-zinc-400 focus:outline-none focus:ring-0" 
                       placeholder="Search pages or socials..." 
                       id="search-input" 
                       type="text" 
                       autocomplete="off">
            </div>
            <div class="max-h-80 overflow-y-auto px-1 py-2">
                <div class="py-1">
                    <div class="my-2 px-5 text-xs font-medium text-zinc-500">PAGES</div>
                    <ul class="space-y-1" id="search-results">
                        <!-- Home -->
                        <li class="search-item" data-name="home" data-url="{% url 'home' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'home' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'home' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path>
                                            <polyline points="8 10 12 14 16 10"></polyline>
                                        </svg>
                                    </div>
                                    <span>Home</span>
                                </div>
                                {% if request.resolver_match.url_name == 'home' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        
                        <!-- Dashboard -->
                        <li class="search-item" data-name="dashboard" data-url="{% url 'dashboard' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'dashboard' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'dashboard' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                                            <rect x="9" y="9" width="6" height="6"></rect>
                                            <line x1="9" y1="1" x2="9" y2="4"></line>
                                            <line x1="15" y1="1" x2="15" y2="4"></line>
                                            <line x1="9" y1="20" x2="9" y2="23"></line>
                                            <line x1="15" y1="20" x2="15" y2="23"></line>
                                            <line x1="20" y1="9" x2="23" y2="9"></line>
                                            <line x1="20" y1="14" x2="23" y2="14"></line>
                                            <line x1="1" y1="9" x2="4" y2="9"></line>
                                            <line x1="1" y1="14" x2="4" y2="14"></line>
                                        </svg>
                                    </div>
                                    <span>Dashboard</span>
                                </div>
                                {% if request.resolver_match.url_name == 'dashboard' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        
                        <!-- Projects -->
                        <li class="search-item" data-name="projects" data-url="{% url 'projects' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name in 'projects projects_detail' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name in 'projects projects_detail' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                                            <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                                            <line x1="6" y1="1" x2="6" y2="4"></line>
                                            <line x1="10" y1="1" x2="10" y2="4"></line>
                                            <line x1="14" y1="1" x2="14" y2="4"></line>
                                        </svg>
                                    </div>
                                    <span>Projects</span>
                                </div>
                                {% if request.resolver_match.url_name in 'projects projects_detail' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        
                        <!-- Blog -->
                        <li class="search-item" data-name="blog" data-url="{% url 'blog' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name in 'blog blog_detail' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name in 'blog blog_detail' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 11a9 9 0 0 1 9 9"></path>
                                            <path d="M4 4a16 16 0 0 1 16 16"></path>
                                            <circle cx="5" cy="19" r="1"></circle>
                                        </svg>
                                    </div>
                                    <span>Blog</span>
                                </div>
                                {% if request.resolver_match.url_name in 'blog blog_detail' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        
                        <!-- About -->
                        <li class="search-item" data-name="about" data-url="{% url 'about' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'about' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'about' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                    </div>
                                    <span>About</span>
                                </div>
                                {% if request.resolver_match.url_name == 'about' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        
                        <!-- Contact -->
                        <li class="search-item" data-name="contact" data-url="{% url 'contact' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'contact' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'contact' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M20.92 2.38A15.72 15.72 0 0 0 17.5 2a8.26 8.26 0 0 0-6 2.06Q9.89 5.67 8.31 7.27c-1.21-.13-4.08-.2-6 1.74a1 1 0 0 0 0 1.41l11.3 11.32a1 1 0 0 0 1.41 0c1.95-2 1.89-4.82 1.77-6l3.21-3.2c3.19-3.19 1.74-9.18 1.68-9.43a1 1 0 0 0-.76-.73zm-2.36 8.75L15 14.67a1 1 0 0 0-.27.9 6.81 6.81 0 0 1-.54 3.94L4.52 9.82a6.67 6.67 0 0 1 4-.5A1 1 0 0 0 9.39 9s1.4-1.45 3.51-3.56A6.61 6.61 0 0 1 17.5 4a14.51 14.51 0 0 1 2.33.2c.24 1.43.62 5.04-1.27 6.93z"></path>
                                            <circle cx="15.73" cy="8.3" r="2"></circle>
                                            <path d="M5 16c-2 1-2 5-2 5a7.81 7.81 0 0 0 5-2z"></path>
                                        </svg>
                                    </div>
                                    <span>Contact</span>
                                </div>
                                {% if request.resolver_match.url_name == 'contact' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>                        </li>

                        {% if GUESTBOOK_PAGE %}
                        <!-- Guestbook -->
                        <li class="search-item" data-name="guestbook" data-url="{% url 'guestbook' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'guestbook' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'guestbook' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 256 256" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M120,128a16,16,0,1,1-16-16A16,16,0,0,1,120,128Zm32-16a16,16,0,1,0,16,16A16,16,0,0,0,152,112Zm84,16A108,108,0,0,1,78.77,224.15L46.34,235A20,20,0,0,1,21,209.66l10.81-32.43A108,108,0,1,1,236,128Zm-24,0A84,84,0,1,0,55.27,170.06a12,12,0,0,1,1,9.81l-9.93,29.79,29.79-9.93a12.1,12.1,0,0,1,3.8-.62,12,12,0,0,1,6,1.62A84,84,0,0,0,212,128Z"></path>
                                        </svg>
                                    </div>
                                    <span>Guestbook</span>
                                </div>
                                {% if request.resolver_match.url_name == 'guestbook' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                        {% endif %}

                        <!-- Privacy Policy -->
                        <li class="search-item" data-name="privacy policy" data-url="{% url 'privacy' %}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 {% if request.resolver_match.url_name == 'privacy' %}bg-zinc-800{% else %}hover:bg-zinc-800{% endif %}">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12 {% if request.resolver_match.url_name == 'privacy' %}-rotate-12{% endif %}">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path>
                                        </svg>
                                    </div>
                                    <span>Privacy Policy</span>
                                </div>
                                {% if request.resolver_match.url_name == 'privacy' %}
                                <span class="animate-pulse text-xs text-zinc-400">You are here</span>
                                {% else %}
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Pages</div>
                                {% endif %}
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- SOCIALS Section -->
                <div class="py-1">
                    <div class="my-2 px-5 text-xs font-medium text-zinc-500">SOCIALS</div>
                    <ul class="space-y-1">
                        <!-- Email -->
                        <li class="social-item" data-name="email" data-url="{{ about.social_media.email }}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 hover:bg-zinc-800">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z"></path>
                                            <path d="M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z"></path>
                                        </svg>
                                    </div>
                                    <span>Email</span>
                                </div>
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Link</div>
                            </div>
                        </li>
                        
                        <!-- LinkedIn -->
                        <li class="social-item" data-name="linkedin" data-url="{{ about.social_media.linkedin }}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 hover:bg-zinc-800">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path>
                                        </svg>
                                    </div>
                                    <span>LinkedIn</span>
                                </div>
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Link</div>
                            </div>
                        </li>
                        
                        <!-- X (Twitter) -->
                        <li class="social-item" data-name="x twitter" data-url="{{ about.social_media.x }}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 hover:bg-zinc-800">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                        </svg>
                                    </div>
                                    <span>X (Twitter)</span>
                                </div>
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Link</div>
                            </div>
                        </li>
                        
                        <!-- Instagram -->
                        <li class="social-item" data-name="instagram" data-url="{{ about.social_media.instagram }}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 hover:bg-zinc-800">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"></path>
                                        </svg>
                                    </div>
                                    <span>Instagram</span>
                                </div>
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Link</div>
                            </div>
                        </li>
                        
                        <!-- GitHub -->
                        <li class="social-item" data-name="github" data-url="{{ about.social_media.github }}">
                            <div class="text-zinc-300 group mx-2 flex cursor-pointer items-center justify-between gap-3 rounded-md px-4 py-2 hover:bg-zinc-800">
                                <div class="flex items-center gap-5">
                                    <div class="transition-all duration-300 group-hover:-rotate-12">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                                        </svg>
                                    </div>
                                    <span>GitHub</span>
                                </div>
                                <div class="rounded-md border border-zinc-500 px-1.5 py-0.5 text-xs text-zinc-400">Link</div>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <div id="no-results" class="hidden py-8 text-center text-zinc-400">
                    <div class="text-sm">No results found</div>
                    <div class="text-xs mt-1">Try searching for something else</div>                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Theme Switcher Functionality
(function() {
    const themes = {
        light: {
            icon: `<circle cx="12" cy="12" r="5"></circle>
                   <line x1="12" y1="1" x2="12" y2="3"></line>
                   <line x1="12" y1="21" x2="12" y2="23"></line>
                   <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                   <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                   <line x1="1" y1="12" x2="3" y2="12"></line>
                   <line x1="21" y1="12" x2="23" y2="12"></line>
                   <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                   <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>`,
            text: 'Light'
        },
        dark: {
            icon: `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>`,
            text: 'Dark'
        },
        system: {
            icon: `<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                   <line x1="8" y1="21" x2="16" y2="21"></line>
                   <line x1="12" y1="17" x2="12" y2="21"></line>`,
            text: 'System'
        }
    };

    // Get current theme from localStorage or default to system
    function getCurrentTheme() {
        return localStorage.getItem('theme') || 'system';
    }

    // Set theme in localStorage and apply it
    function setTheme(theme) {
        localStorage.setItem('theme', theme);
        applyTheme(theme);
        updateThemeUI(theme);
    }

    // Apply theme to document
    function applyTheme(theme) {
        const root = document.documentElement;
        
        if (theme === 'light') {
            root.classList.remove('dark');
        } else if (theme === 'dark') {
            root.classList.add('dark');
        } else if (theme === 'system') {
            // Follow system preference
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                root.classList.add('dark');
            } else {
                root.classList.remove('dark');
            }
        }
    }

    // Update theme button UI
    function updateThemeUI(theme) {
        const themeData = themes[theme];
        
        // Update mobile UI
        const mobileIcon = document.getElementById('mobile-theme-icon');
        const mobileText = document.getElementById('mobile-theme-text');
        if (mobileIcon && mobileText) {
            mobileIcon.innerHTML = themeData.icon;
            mobileText.textContent = themeData.text;
        }

        // Update desktop UI
        const desktopIcon = document.getElementById('desktop-theme-icon');
        const desktopText = document.getElementById('desktop-theme-text');
        if (desktopIcon && desktopText) {
            desktopIcon.innerHTML = themeData.icon;
            desktopText.textContent = themeData.text;
        }
    }

    // Toggle dropdown visibility
    function toggleDropdown(dropdownId, isOpen) {
        const dropdown = document.getElementById(dropdownId);
        if (dropdown) {
            if (isOpen) {
                dropdown.classList.remove('hidden');
            } else {
                dropdown.classList.add('hidden');
            }
        }
    }

    // Initialize theme
    function initTheme() {
        const currentTheme = getCurrentTheme();
        applyTheme(currentTheme);
        updateThemeUI(currentTheme);

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (getCurrentTheme() === 'system') {
                applyTheme('system');
            }
        });
    }

    // Setup event listeners
    function setupEventListeners() {
        // Mobile theme button
        const mobileButton = document.getElementById('mobile-theme-button');
        const mobileDropdown = document.getElementById('mobile-theme-dropdown');
        if (mobileButton && mobileDropdown) {
            mobileButton.addEventListener('click', (e) => {
                e.stopPropagation();
                const isHidden = mobileDropdown.classList.contains('hidden');
                toggleDropdown('mobile-theme-dropdown', isHidden);
                toggleDropdown('desktop-theme-dropdown', false); // Close desktop dropdown
            });
        }

        // Desktop theme button
        const desktopButton = document.getElementById('desktop-theme-button');
        const desktopDropdown = document.getElementById('desktop-theme-dropdown');
        if (desktopButton && desktopDropdown) {
            desktopButton.addEventListener('click', (e) => {
                e.stopPropagation();
                const isHidden = desktopDropdown.classList.contains('hidden');
                toggleDropdown('desktop-theme-dropdown', isHidden);
                toggleDropdown('mobile-theme-dropdown', false); // Close mobile dropdown
            });
        }

        // Theme option clicks
        document.addEventListener('click', (e) => {
            if (e.target.closest('.theme-option')) {
                const themeOption = e.target.closest('.theme-option');
                const theme = themeOption.getAttribute('data-theme');
                setTheme(theme);
                toggleDropdown('mobile-theme-dropdown', false);
                toggleDropdown('desktop-theme-dropdown', false);
            }
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#mobile-theme-button') && !e.target.closest('#mobile-theme-dropdown')) {
                toggleDropdown('mobile-theme-dropdown', false);
            }
            if (!e.target.closest('#desktop-theme-button') && !e.target.closest('#desktop-theme-dropdown')) {
                toggleDropdown('desktop-theme-dropdown', false);
            }
        });

        // Close dropdowns on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                toggleDropdown('mobile-theme-dropdown', false);
                toggleDropdown('desktop-theme-dropdown', false);
            }
        });
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            setupEventListeners();
        });
    } else {
        initTheme();
        setupEventListeners();
    }
})();
</script>